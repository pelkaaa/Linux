## Part 1. Установка ОС

* #### Устанвливаем Ubuntu 20.04 Server LTS без графического интерфейса. (Используя программу для виртуализации - VirtualBox) 
Узнаем версию Ubuntu, выполнив команду 
``cat /etc/issue``

![1](a1.png)

***
## Part 2. Создание пользователя
* ####  Создаем пользователя, отличного от пользователя, который создавался при установке. Добавляем в группу ``adm``
* Пишем команду ``sudo adduser www``
* Добавляем в группу ``adm`` командой ``sudo usermod -aG adm www`` 
* Для проверки вбиваем команду ``cat /etc/passwd``

![2](a2.1.1.png)

или так 

![3](a2.1.2.png)

***
## Part 3. Настройка сети ОС
* #### Задаем название машины вида  user-1 
* Вводим ``Sudo vim /etc/hostname`` 
* Нажимаем ``i``
* Меняем содержимое 
* Нажимаем  ``esc`` 
* Вводим ``:wq!``
* Проверяем командой ``hostname``

![4](a3.05.png)

* #### Установливаем временную зону, соответствующую текущему местоположению 
* Вводим команду `` sudo date -s «00:00»``
* Проверяем командой ``timedatectil``
> __Меняет время, но не местоположение__

* Вводим команду ``Timedatectl list-timezones`` 
* Нажимаем ``q``
* Вводим команду ``Sudo timedatectl set-timezone Europe/Moscow`` 
* Проверяем командой ``timedatectil``

![5](a3.1.png) 

* #### Выводим названия сетевых интерфейсов с помощью консольной команды
* Вводим команду ``ip link show`` 

![6](a3.3.1.png) 

* Краткая версия выводится командой `` ip  -br link show``

![7](a3.3.2.png) 

> Lo - Виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине. Любой трафик, который посылается компьютерной программой на интерфейс loopback, тут же получается тем же интерфейсом. Этот механизм работает без какого-либо активного подключения, поэтому он полезен для тестирования служб, не подвергая их безопасность риску, как при удаленном сетевом доступе. Подобным образом, пингование адреса loopback — это основной тест функционирования IP стека в операционной системе.Отдельная среда передачи данных (локальная сеть) также имеет собственный адрес. Если представить IP-адрес в виде линейки из 32 битов, она строго разделяется на две части: столько-то битов слева отводится под адрес сети, а оставшиеся – под адрес абонента в этой сети. Для того чтобы определить размер адреса сети, используется сетевая маска – линейка из 32 битов, в которой на месте адреса сети стоят единицы, а на месте адреса компьютера – нули. При наложении маски на IP-адрес все единицы в нем, которым соответствуют нули в маске, превращаются в нули. Таким образом вычисляется IP-адрес сети.

* #### Используя консольную команду получаем ip адрес устройства, на котором работаю, от DHCP сервера
 * Вводим команду ``IP address`` 

 ![8](a3.45.png)

  >DHCP - Dynamic Host Configuration Protocol
* #### Определяем и выводим на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw)
* Внутренний выводится командой ``Ping -c 3 localhost`` 

 ![9](a3.5.1.png)

* Ip в локальной сети выводим командой  ``ip -br a``

 ![10](a3.5.2.png)

* Внешний выводится с помощью команды ``ip route`` 

 ![11](a3.5.3.png)

* #### Задаем статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (использую публичный DNS сервер)
* Вводим `` sudo apt install net-tools ``  
* Вводим `` ifconfig`` 
*  Смотрим название файла, который нужно изменить `` Ls /etc/netplan `` 
* Меняем содержимое файла командой `` sudo nano /etc/netplan  
00-installer-config.yami `` 

 ![12](a3.6.png)
 

* #### Перезагружаю виртуальную машину. Убедаюсь, что статичные сетевые настройки (ip, gw, dns) соответствуют заданным в предыдущем пункте
* Пишем `` sudo reboot now `` для перезапуска 
* Пишем ``iconfig`` и сверяем настройки 

![13](a3.6.2.png)

* Проверяем dns сервера командами ``ping -c 5 ya.ru | grep packet `` и ``ping -c 5 1.1.1.1 | grep packet ``

![14](a3.6.3.png)

## Part 4. Обновление ОС
* #### Обновляем системные пакеты до последней на момент выполнения задания версии 
* Пишем команду ``sudo apt update``

![14](a4.png)

***
## Part 5. Использование команды sudo
> sudo (англ. Substitute User and do, дословно «подменить пользователя и выполнить») 
* #### Разрешаю пользователю, созданному в Part 2, выполнять команду sudo
* Выполняется командой ``sudo usermod -aG sudo www``
* Проверяем 

![15](a1111.png)

* #### Меняю  hostname ОС от имени пользователя, созданного в пункте Part 2 (используя sudo)
Было

![16](a5.png)

Стало 

![17](a5.2.png)

***
## Part 6. Установка и настройка службы времени
* #### Настраиваю службу автоматической синхронизации времени
* Смотрим фактическое время 

![18](a6.1.png)

* Устанавливаем NTP командой ``sudo install apt ntp``
* ``sudo install apt ntpdate``
* ``sudo systemictl enable ntp``
* ``sudo systemictl start ntp``
> Далее должна сработать команда ``sudo timedatectl set-ntp on``, но мне не повезло 
* ``sudo apt remove ntp``
* ``sudo apt install --reinstall systemd-timesyncd``
* ``sudo dpkg-reconfigure tzdata``
* ``cat /etc/timezone``
* `` timedatectl status`` 


* Проверяем 

![19](a666.jpg)

>Вывод следующей команды содержит ``NTPSynchronized=yes: 
timedatectl show``
***
## Part 7. Установка и использование текстовых редакторов
* #### Установливаю текстовые редакторы VIM, NANO и JOE 
* ``sudo apt install vim``
* ``sudo apt install nano``
* ``sudo apt install joe``

![20](a7.png)

* #### Используя каждый из трех  редакторов, создаю файл test_X.txt, где X -- название редактора, в котором создан файл. Пишу в нём свой никнейм, закрываю  файл с сохранением изменений
* Ввоожу `` sudo vim test_vim.txt `` 
* ``i``

![21](a7.1.png)

* для выхода  ``esc``
*  пишу ``:wq``
***
* Ввоожу `` sudo nano test_nano.txt `` 

![22](a7.2.png)

* для выхода пишу ``control x``
* ``y``
***
* Ввоожу `` sudo joe test_joe.txt `` 
* ``i``
* для поиска ввожу
``control k f b`` 

![23](a7v1.png)

* для выхода пишу ``control k d``
* ``control c``
* ``y``


* #### Используя каждый из трех выбранных редакторов, открываю файл на редактирование, редактирую файл, заменив никнейм на строку "21 School 21", закрываю файл без сохранения изменений
* Ввоожу `` sudo vim test_vim.txt `` 
* ``i``

![24](a7.1.1.png)

* для выхода  ``esc``
* пишу``:q!``
***
* Ввоожу `` sudo nano test_nano.txt `` 

![25](a7.2.2.png)

* для выхода пишу ``control x``
* ``n``
***
* Ввоожу `` sudo joe test_joe.txt `` 

![26](a7.3.3.png)

* для выхода 
* ``control c``
* ``y``


* #### Используя каждый из трех выбранных редакторов, редактирую файл ещё раз (по аналогии с предыдущим пунктом), а затем осваиваю функции поиска по содержимому файла (слово) и замены слова на ``mood``
* Ввоожу `` sudo vim test_vim.txt `` 
* ``i``
* меняю фаил 

![27](a7a.png)

* поиск через
* ``esc``
* `` /``

![28](a7a1.png)

* для замены пишу 
 ``esc``
 ``:%s/cat/mood/g``

 ![29](a7a2.png)

  ``enter``
***
* Ввоожу `` sudo nano test_nano.txt `` * меняю фаил 

![3](a7b1.png)

* поиск через ``control w``

![30](a7b1.png)

* для замены пишу 
 ``Ctrl+\``
 ``Cat``
 ``Enter``
 ``Mood``
  ``Enter``
 ``y``

 ![30](a7b2.png)
***
 * Ввоожу `` sudo joe test_joe.txt `` * меняю фаил 

![31](a7v1.png)

* поиск через ``control k f``
 ``Cat``
   ``Enter``
`` b``
  ``Enter``

![32](a7v2.png)

* для замены пишу 
 ``Ctrl k f``
 ``Cat``
   ``Enter``
 ``b r``
   ``Enter``
 ``Mood``
  ``Enter``
   ``y``

 ![33](a7v3.png)


***
## Part 8. Установка и базовая настройка сервиса SSHD
* #### Установливаю службу SSHd.
* Вводим команды:
``sudo apt update``
``sudo apt-get install ssh``
``sudo apt install openssh-server``
* #### Добавляю автостарт службы при загрузке системы.
*  Выполняем команду ``sudo systemctl enable sshd``
 * ####  Перенастраиваю службу SSHd на порт 2022
* Выполняем команду sudo ``sudo nano /etc/ssh/sshd_config``

 ![34](a8888.png)

* #### Используя команду ps, показываю наличие процесса sshd. Для этого к команде нужно подобрать ключи 
>Команда ps (сокращение от Process Status) — это утилита командной строки, с помощью которой можно посмотреть информацию о запущенных процессах в системе Linux
Ключ -e позволяет посмотреть ВСЕ запущенные процессы

Выполняем команду ``ps -e | grep ssh`` и видим наличие процесса ssh 

 ![35](a8181.png)

* #### Перезагружаю систему
* ``reboot``
 * Затем ``netstat -tan`` и смотрим результат

 ![36](a88778.png)

 > Ключ -а - отображение всех подключений и ожидающих портов.
Ключ -n - отображение адресов и номеров портов в числовом формате.
Ключ -t - отображение текущего подключения в состоянии переноса нагрузки с процессора на сетевой адаптер при передаче данных ( "offload" ).
Proto: Содержит тип протокола
Recv-Q: Счетчик байтов не скопированных программой пользователя из этого сокета.
Send-Q: Счетчик байтов не подтвержденных удаленным узлом
Local Address: Адрес и номер порта локального конца сокета
Foreign Address: Адрес и номер удаленного порта сокета
LISTEN: Сокет ожидает входящих подключений
0.0.0.0: это немаршрутизируемый адрес IPv4, который используется в качестве адреса по умолчанию или адреса заполнителя.

***
## Part 9. Установка и использование утилит top, htop
* #### Установливаю и запускаю утилиту top
* uptime

![37](a9.1.png)

* количество авторизованных пользователей

![38](a9.2.png)

* общая загрузка системы

![39](a9.3.png)

* общее количество процессов

![40](a9.4.png)

* загрузка cpu

![41](a9.5.png)

* загрузка памяти

![42](a9.6.png)

* pid процесса занимающего больше всего памяти ``Shift+M``

![43](a91.png)

* pid процесса, занимающего больше всего процессорного времени ``Shift+T``

![44](a92.png)


* #### Установливаю и запускаю утилиту htop
> use F6

* Сортировка по ``PID``

![45](a99.1.png)

 * Сортировка по ``PERCENT_CPU``

 ![46](a99.2.png)

 * Сортировка по ``PERCENT_MEM`` 

 ![47](a99.3.png)

 * Сортировка по ``TIME`` 

 ![48](a99.4.png)

* Сортировка  для процесса ``sshd`` 
> use F4

![49](a99.5.png)

* с процессом ``syslog``, найденным, используя поиск
> use F3

![50](a99.6.png)

* с добавленным выводом ``hostname``, ``clock`` и ``uptime``
> use F2

![51](a77.8.png)

***
## Part 10. Использование утилиты fdisk
* #### Запускаю команду fdisk -l

![52](a10.png)

``Disk /dev/sda: 14.98 GiB, 16054747136 bytes, 31356928 sectors``
***
## Part 11. Использование утилиты df
* #### Запускаю команду df.
* Для корневого раздела (/):

> Размеры в байтах 

* размер раздела 10218772
* размер занятого пространства 4917312
* размер свободного пространства 4760788
* процент использования 51% 

![53](a11.1.png)

* #### Запускаю команду df -Th
* Для корневого раздела (/):
> Тип файловой системы ``ext4``
* размер раздела 9.8G
* размер занятого пространства 4.7G
* размер свободного пространства 4.6G
* процент использования 51%



![54](a11.2.png)


***
## Part 12. Использование утилиты du
* #### Запускаю команду du
*  Вывожу размер папок ``/home``, ``/var``, ``/var/log`` (в байтах, в человекочитаемом виде)

![55](a12.1.png)

* #### Вывожу размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя *)

![56](a12.2.png)
***
## Part 13. Установка и использование утилиты ncdu
* #### Установливаю утилиту ncdu
* Вывожу размер папки ``/home``

![57](a13.1.png)

* Вывожу размер папки ``/var``

![58](a13.2.png) 

* Вывожу размер папки ``/var/log``

![59](a13.3.png)

***
## Part 14. Работа с системными журналами
* #### Открываю для просмотра:

* 1. ``/var/log/dmesg``

![60](a14.1.png)

* 2. `` /var/log/syslog``

![61](a14.2.png)

* 3. ``/var/log/auth.log``

![62](a14.3.png)
*** 
* > Время последней успешной авторизации 9 сентября 01:03 , имя пользователя ppp и метод входа в систему - терминал

![63](a14.4.png)

* Перезапуск ``ssh``
* Скрин с сообщением о рестарте службы

![64](a14.5.png)

***
## Part 15. Использование планировщика заданий CRON
* #### Используя планировщик заданий, запускаю команду uptime через каждые 2 минуты
* Пишем задачу для КРОНа через ``sudo crontab -e`` 

![65](a15.1.png)

*  Запускаем ``CRON`` через ``sudo service cron start``
* Проверяем выполнение 

![66](a15.2.png)

* Выводим на экран список текущих заданий для ``CRON``

![67](a15.3.png)

* #### Удаляю все задания из планировщика заданий

* Выполняем ``sudo crontab -e`` и удаляем задачи
* Останавливаем ``CRON`` через ``sudo service cron stop``
* Проверяем через команду ``crontab -l``, что список команд пуст

![68](a15.4.png)

***
§§§
